<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Skin Galerim</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;font-family:Arial;background:#f3f6f9}
header{
    background:#1f2937;
    color:#fff;
    padding:15px 25px;
    display:flex;
    justify-content:space-between
}
button{background:#ef4444;color:#fff;border:none;padding:8px 14px;border-radius:6px;cursor:pointer}
main{padding:25px}
.gallery{display:flex;gap:15px;flex-wrap:wrap}
.gallery img{width:150px;height:150px;object-fit:cover;border-radius:10px}
</style>
</head>
<body>

<script>
const user=JSON.parse(localStorage.getItem("customerUser"));
if(!user) location.href="index.html";
</script>

<header>
<div>Hoş geldin, <b id="u"></b></div>
<button onclick="logout()">Çıkış Yap</button>
</header>

<main>
<h2>Skin Galerim</h2>
<input type="file" id="file">
<button onclick="upload()">Yükle</button>
<div class="gallery" id="g"></div>
</main>

<script>
document.getElementById("u").innerText=user.username;
const key="skins_"+user.username;
const g=document.getElementById("g");

function load(){
    g.innerHTML="";
    (JSON.parse(localStorage.getItem(key))||[])
    .forEach(x=>{
        const i=document.createElement("img");
        i.src=x; g.appendChild(i);
    });
}

function upload(){
    const f=document.getElementById("file").files[0];
    if(!f) return;
    const r=new FileReader();
    r.onload=()=>{
        const arr=JSON.parse(localStorage.getItem(key))||[];
        arr.push(r.result);
        localStorage.setItem(key,JSON.stringify(arr));
        load();
    };
    r.readAsDataURL(f);
}

function logout(){
    localStorage.removeItem("customerUser");
    location.href="index.html";
}
load();
</script>
</body>
</html>
